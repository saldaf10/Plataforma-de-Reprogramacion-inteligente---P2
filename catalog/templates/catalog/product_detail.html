{% extends 'base.html' %}
{% block title %}{{ product.name }} - PRI Shop{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-5">
    {% if product.image %}
    <img class="img-fluid rounded" src="{{ product.image.url }}" alt="{{ product.name }}">
    {% else %}
    <div class="bg-light rounded" style="height: 300px;"></div>
    {% endif %}
  </div>
  <div class="col-md-7">
    <h2>{{ product.name }}</h2>
    <p class="text-muted">{{ product.category.name }}</p>
    <p>{{ product.description }}</p>
    <p class="h4">${{ product.price }}</p>
    <form method="post" action="{% url 'cart:add' product.id %}">{% csrf_token %}
      <div class="input-group" style="max-width: 200px;">
        <input type="number" min="1" name="quantity" value="1" class="form-control">
        <button class="btn btn-primary">Agregar</button>
      </div>
    </form>
  </div>
</div>

<hr class="my-4">
<h4>Productos similares</h4>
<div class="row">
  {% for p in similar %}
  <div class="col-md-3 mb-3">
    <div class="card h-100">
      {% if p.image %}<img class="card-img-top" src="{{ p.image.url }}" alt="{{ p.name }}">{% endif %}
      <div class="card-body d-flex flex-column">
        <a class="stretched-link text-decoration-none" href="{% url 'catalog:product_detail' p.slug %}"><h6 class="card-title">{{ p.name }}</h6></a>
        <p class="text-muted small mb-2">{{ p.category.name }}</p>
        <p class="fw-bold mt-auto">${{ p.price }}</p>
      </div>
    </div>
  </div>
  {% empty %}
  <p>No hay productos similares.</p>
  {% endfor %}
</div>
{% endblock %}

